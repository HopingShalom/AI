<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>A Demo</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <!-- 로그인 모달 -->
  <div class="modal-overlay" id="authModal">
    <div class="modal">
      <h2 id="authTitle">로그인</h2>
      <form id="authForm">
        <input type="email" id="authEmail" placeholder="이메일" required />
        <input type="password" id="authPassword" placeholder="비밀번호" required />
        <div id="registerFields" class="hidden">
          <input type="text" id="authName" placeholder="표시 이름" />
          <input type="text" id="authPurpose" placeholder="대화 목적 태그" />
          <label class="checkbox-label"><input type="checkbox" id="authAge" /> 만 15세 이상입니다</label>
        </div>
        <button type="submit" id="authSubmit">로그인</button>
        <p class="auth-switch"><span id="authSwitchText">계정이 없으신가요?</span> <a href="#" id="authSwitchLink">회원가입</a></p>
        <p class="error hidden" id="authError"></p>
      </form>
    </div>
  </div>

  <header class="topbar">
    <div class="brand">A</div>
    <div class="user-info">
      <span id="userName">로그인 필요</span>
      <button id="logoutBtn" class="hidden">로그아웃</button>
    </div>
  </header>

  <main class="screen">
    <!-- Feed -->
    <section class="page" id="page-feed" data-page="feed">
      <h1>Feed</h1>
      <div id="feedContent"><p class="muted">로딩 중...</p></div>
    </section>

    <!-- Chat -->
    <section class="page hidden" id="page-chat" data-page="chat">
      <div id="chatContainer">
        <!-- 대화 목록 -->
        <div id="chatList">
          <div class="chat-header">
            <h1>Chat</h1>
            <button id="newChatBtn" class="btn-small">+ 새 대화</button>
          </div>
          <div id="conversationList"></div>
        </div>
    <!-- 채팅 화면 -->
    <div id="chatView" class="hidden">
      <div class="chat-header">
        <button id="backToListBtn" class="btn-back">←</button>
        <span id="chatTitle">My AI</span>
        <div style="display:flex; gap:6px;">
          <button id="shareChatBtn" class="btn-small">공유</button>
          <button id="chatSettingsBtn" class="btn-small">⚙️</button>
        </div>
      </div>
      <div id="messagesContainer"></div>
      <div class="chat-input-area">
        <input type="text" id="chatInput" placeholder="메시지를 입력하세요..." />
        <button id="sendBtn">전송</button>
      </div>
    </div>
</div> <hr style="margin:18px 0;border-color:var(--line);" />
      <div id="dmSection">
        <div class="chat-header">
          <h2 style="font-size:16px;margin:0;">DM</h2>
          <button id="loadDmBtn" class="btn-small">새로고침</button>
        </div>
        <div id="dmList" class="user-list">
          <p class="muted">DM 대화가 없습니다. 다른 사용자 프로필에서 DM을 시작해보세요.</p>
        </div>
        <div id="dmView" class="hidden">
          <div class="chat-header">
            <button id="dmBackBtn" class="btn-back">←</button>
            <span id="dmTitle"></span>
          </div>
          <div id="dmMessages" style="margin-bottom:12px;max-height:260px;overflow-y:auto;border-radius:10px;border:1px solid var(--line);padding:10px;background:var(--bg);"></div>
          <div class="chat-input-area">
            <input type="text" id="dmInput" placeholder="DM 메시지를 입력하세요..." />
            <button id="dmSendBtn">전송</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Search -->
    <section class="page hidden" id="page-search" data-page="search">
      <h1>Search</h1>
      <input type="text" id="searchInput" placeholder="사용자 검색..." class="search-input" />
      <div id="searchResults" class="user-list"></div>
    </section>

    <!-- Profile -->
    <section class="page hidden" id="page-profile" data-page="profile">
      <h1>Profile</h1>
      <div id="profileContent"><p class="muted">로그인하면 프로필이 표시됩니다.</p></div>
    </section>
  </main>

  <!-- 공개범위 설정 모달 -->
  <div class="modal-overlay hidden" id="visibilityModal">
    <div class="modal">
      <h2>대화 공개범위 설정</h2>
      <select id="visibilitySelect">
        <option value="private">비공개</option>
        <option value="followers">팔로워만</option>
        <option value="public">전체 공개</option>
      </select>
      <p class="muted" style="margin:12px 0;font-size:13px;">
        "전체 공개" 선택 시 내 프로필과 함께 Feed에 노출됩니다.
      </p>
      <button id="saveVisibilityBtn" class="btn-primary">저장</button>
      <button id="closeVisibilityBtn" class="btn-secondary" style="margin-top:8px;">취소</button>
    </div>
  </div>

  <nav class="tabbar">
    <button class="tab active" data-tab="feed">Feed</button>
    <button class="tab" data-tab="chat">Chat</button>
    <button class="tab" data-tab="search">Search</button>
    <button class="tab" data-tab="profile">Profile</button>
  </nav>

  <script src="/app.js"></script>
</body>
</html>
